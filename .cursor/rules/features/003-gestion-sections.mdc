---
description: 
globs: 
alwaysApply: false
---
---
description: Gestion des sections dans lâ€™administration Gruel Traiteur
globs: ["app/admin/sections/**/*.tsx"]
alwaysApply: false
---

## ğŸ¯ Objectif

Permettre Ã  lâ€™utilisateur de :
- Voir la liste des sections existantes
- CrÃ©er une nouvelle section
- Modifier une section
- GÃ©rer ses sous-sections (Ã©dition, ajout, suppression, tri par drag-and-drop)
- ContrÃ´ler la visibilitÃ© dâ€™une section dans le menu public

---

## ğŸ§¾ FonctionnalitÃ©s

### 1. ğŸ—‚ï¸ Data Table des Sections

- Affichage des sections sous forme de tableau :
  - Nom de la section
  - Statut (active/inactive)
  - Boutons dâ€™action : **DÃ©tails**, **Modifier**, **Supprimer**

- Statut affichÃ© sous forme de badge (diffÃ©rencier **actif** de **inactif**)

### 2. ğŸ“ Formulaire de crÃ©ation/Ã©dition

- Champs :
  - `Nom de la section` (obligatoire)
  - `VisibilitÃ© dans le menu` (toggle switch)
- Boutons :
  - Sauvegarder
  - Annuler / Fermer

- Validation :
  - Nom requis
  - Afficher les erreurs sous le champ

### 3. ğŸ§© DÃ©tail dâ€™une Section (Drawer ou Modal)

- Affiche la **liste des sous-sections** :
  - Nom
  - Boutons dâ€™action : Modifier, Supprimer
- Utiliser `@TanStask Table` et le composant `Data Table` de Shadcn UI pour la liste 
- Ajout de sous-section (inline)
- Ã‰dition rapide des sous-sections
- **Drag & drop** pour rÃ©organiser les sous-sections :
  - Utiliser `@dnd-kit`
  - Rendu avec retour visuel (Ã©lÃ©vation, ombrage)
- Modification de la section principale (nom + visibilitÃ©)
- Sauvegarde dÃ©clenchÃ©e aprÃ¨s action ou manuellement


---

## ğŸ“ UI/UX

- Responsive
- Design sobre et lisible
- Afficher un `toast` ou message aprÃ¨s chaque action rÃ©ussie


---

## ğŸ§  Conseils pour lâ€™IA

- RÃ©utiliser le mÃªme composant pour crÃ©ation et Ã©dition (via props)
- Stocker les sous-sections dans un `useState`
- GÃ©rer la logique dâ€™ordre dans un hook personnalisÃ© `useSortableList()`
- RÃ©utiliser des states Globaux Zustand s'il en exite et ne pas hÃ©siter Ã  les modifier si celÃ  semble judicieux ou alors crÃ©er en un nouveau. Si l'utilisation d'un state existant a Ã©tÃ© choisi, s'assurer que sa modication ou son usage n'a pas crÃ©er de rÃ©gressions ailleurs.
- PrÃ©voir une structure typÃ©e (la crÃ©er si elle n'existe pas dÃ©jÃ ):

```ts
type SousSection = {
  id: string;
  nom: string;
  plats: Plat[];
};

type Section = {
  id: string;
  nom: string;
  visible: boolean;
  sousSections: SousSection[];
};
